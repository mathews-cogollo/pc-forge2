<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Divs como Ventanas</title>
<style>body {
    margin: 0;
    padding: 0;
}

.window {
    width: 200px;
    height: 150px;
    background-color: lightblue;
    border: 2px solid darkblue;
    position: absolute;
    cursor: pointer;
}
body {
    margin: 0;
    padding: 0;
    position: relative; /* Asegura que los elementos posicionados dentro del cuerpo se basen en él */
}

.window {
    width: 200px;
    height: 150px;
    background-color: lightblue;
    border: 2px solid darkblue;
    position: absolute;
    cursor: pointer;
}

.anchorage {
    width: 300px;
    height: 200px;
    background-color: rgba(255, 0, 0, 0.3); /* Color transparente rojo para el área de anclaje */
    border: 2px dashed red; /* Borde punteado rojo para el área de anclaje */
    position: absolute;
    top: 50px; /* Posición superior del área de anclaje */
    left: 50px; /* Posición izquierda del área de anclaje */
    z-index: -1; /* Asegura que el área de anclaje esté detrás de las ventanas */
}

</style>

</head>
<body>
<div class="window" id="window1">Ventana 1</div>
<div class="window" id="window2">Ventana 2</div>
<div class="anchorage" id="anchorage1" data-x="200" data-y="300" data-distance="50"></div>
<div class="anchorage" id="anchorage2" data-x="400" data-y="200" data-distance="100"></div>



<script>
// Obtener todas las ventanas
const windows = document.querySelectorAll('.window');

// Inicializar las posiciones iniciales de cada ventana
const windowOffsets = {};

// Definir el área de anclaje y la distancia de anclaje para cada ventana
const anchorages = document.querySelectorAll('.anchorage');
const anchorDistance = 50;

// Función para calcular la distancia entre dos puntos
function calculateDistance(x1, y1, x2, y2) {
    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
}

// Función para verificar si la ventana está cerca del área de anclaje
function isNearAnchorage(window, anchorage) {
    const windowRect = window.getBoundingClientRect();
    const anchorageRect = anchorage.getBoundingClientRect();

    const windowCenterX = windowRect.left + windowRect.width / 2;
    const windowCenterY = windowRect.top + windowRect.height / 2;

    const anchorageCenterX = anchorageRect.left + anchorageRect.width / 2;
    const anchorageCenterY = anchorageRect.top + anchorageRect.height / 2;

    const distance = calculateDistance(windowCenterX, windowCenterY, anchorageCenterX, anchorageCenterY);

    return distance <= anchorDistance;
}

// Función para actualizar la posición de la ventana si está cerca del área de anclaje
function updateWindowPosition(window, anchorage) {
    if (isNearAnchorage(window, anchorage)) {
        const anchorageRect = anchorage.getBoundingClientRect();
        const windowRect = window.getBoundingClientRect();

        const newX = anchorageRect.left + (anchorageRect.width - windowRect.width) / 2;
        const newY = anchorageRect.top + (anchorageRect.height - windowRect.height) / 2;

        window.style.left = newX + 'px';
        window.style.top = newY + 'px';
    }
}

// Función para iniciar el arrastre de una ventana
function startDragWindow(e) {
    const window = e.currentTarget;
    const windowRect = window.getBoundingClientRect();

    windowOffsets[window.id] = {
        offsetX: e.clientX - windowRect.left,
        offsetY: e.clientY - windowRect.top
    };

    window.addEventListener('mousemove', dragWindow);
    window.addEventListener('mouseup', stopDragWindow);
}

// Función para arrastrar una ventana
function dragWindow(e) {
    const window = e.currentTarget;
    const offset = windowOffsets[window.id];

    const x = e.clientX - offset.offsetX;
    const y = e.clientY - offset.offsetY;

    window.style.left = x + 'px';
    window.style.top = y + 'px';

    // Actualizar la posición de la ventana si está cerca del área de anclaje
    anchorages.forEach(anchorage => updateWindowPosition(window, anchorage));
}

// Función para detener el arrastre de una ventana
function stopDragWindow(e) {
    const window = e.currentTarget;

    window.removeEventListener('mousemove', dragWindow);
    window.removeEventListener('mouseup', stopDragWindow);
}

// Agregar eventos de arrastre a todas las ventanas
windows.forEach(window => {
    window.addEventListener('mousedown', startDragWindow);
});

</script>
</body>
</html>